<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Solve intelligence, use it to make the world a better place."><title>Ubuntu 14.04 64bit + Caffe rc3 + CUDA 7.5 + Intel MKL 配置说明 | 项脊轩</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Ubuntu 14.04 64bit + Caffe rc3 + CUDA 7.5 + Intel MKL 配置说明</h1><a id="logo" href="/.">项脊轩</a><p class="description">项脊轩，旧南阁子也</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/history/"><i class="fa fa-history"> 历史</i></a><a href="/books/"><i class="fa fa-book"> 书单</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Ubuntu 14.04 64bit + Caffe rc3 + CUDA 7.5 + Intel MKL 配置说明</h1><div class="post-meta">Jul 20, 2016<span> | </span><span class="category"><a href="/categories/深度学习/">深度学习</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2016/07/20/ubuntu1404-caffe-r3-cuda7-5-mkl/" href="/2016/07/20/ubuntu1404-caffe-r3-cuda7-5-mkl/#disqus_thread" class="disqus-comment-count"></a><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装开发所需的依赖包"><span class="toc-number">1.</span> <span class="toc-text">安装开发所需的依赖包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装cuda及驱动"><span class="toc-number">2.</span> <span class="toc-text">安装CUDA及驱动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#准备工作"><span class="toc-number">2.1.</span> <span class="toc-text">准备工作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#下载deb包及安装cuda"><span class="toc-number">2.2.</span> <span class="toc-text">下载deb包及安装CUDA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装cudnn"><span class="toc-number">2.3.</span> <span class="toc-text">安装cuDNN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置环境变量"><span class="toc-number">2.4.</span> <span class="toc-text">设置环境变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试cuda"><span class="toc-number">3.</span> <span class="toc-text">测试CUDA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装intel-mkl-或atlas"><span class="toc-number">4.</span> <span class="toc-text">安装Intel MKL 或Atlas</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装opencv-optional-如果运行caffe时opencv报错-可以重新按照此步骤安装"><span class="toc-number">5.</span> <span class="toc-text">安装OpenCV (Optional， 如果运行caffe时opencv报错， 可以重新按照此步骤安装)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装caffe所需要的python环境"><span class="toc-number">6.</span> <span class="toc-text">安装Caffe所需要的Python环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装matlab"><span class="toc-number">7.</span> <span class="toc-text">安装MATLAB</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编译caffe"><span class="toc-number">8.</span> <span class="toc-text">编译Caffe</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#编译主程序"><span class="toc-number">8.1.</span> <span class="toc-text">编译主程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编译matlab-wrapper"><span class="toc-number">8.2.</span> <span class="toc-text">编译Matlab wrapper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编译python-wrapper"><span class="toc-number">8.3.</span> <span class="toc-text">编译Python wrapper</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考链接"><span class="toc-number">9.</span> <span class="toc-text">参考链接</span></a></li></ol></div></div><div class="post-content"><p>本步骤经笔者亲身实践，集百家所长，能实现Caffe在NVIDIA GPU下进行计算。</p>
<h2 id="安装开发所需的依赖包">安装开发所需的依赖包</h2>
<p>安装开发所需要的一些基本包</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential  <span class="comment"># basic requirement</span></span><br><span class="line">sudo apt-get install vim cmake git    <span class="comment"># tools</span></span><br><span class="line">sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libboost-all-dev libhdf5-serial-dev libgflags-dev libgoogle-glog-dev liblmdb-dev protobuf-compiler libatlas-base-dev  <span class="comment">#required by caffe</span></span><br></pre></td></tr></table></figure>
<h2 id="安装cuda及驱动">安装CUDA及驱动</h2>
<h3 id="准备工作">准备工作</h3>
<p>下文中所有资源可在<strong>百度云</strong> 链接：<a href="http://pan.baidu.com/s/1dEXPg3J" target="_blank" rel="external">http://pan.baidu.com/s/1dEXPg3J</a> 密码：v19o 得到。</p>
<p>在关闭桌面管理 lightdm 的情况下安装驱动似乎可以实现Intel 核芯显卡 来显示 + NVIDIA 显卡来计算。具体步骤如下：</p>
<ol>
<li>
<p>首先在BIOS设置里选择用Intel显卡来显示或作为主要显示设备</p>
</li>
<li>
<p>进入Ubuntu， 按 ctrl+alt+F1 进入tty， 登录tty后输入如下命令</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service lightdm stop</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>该命令会关闭lightdm。如果你使用 gdm或者其他的desktop manager, 请在安装NVIDIA驱动前关闭他。</p>
<h3 id="下载deb包及安装cuda">下载deb包及安装CUDA</h3>
<p>使用deb包安装CUDA及驱动能省去很多麻烦(参见<a href="http://developer.download.nvidia.com/compute/cuda/6_5/rel/docs/CUDA_Getting_Started_Linux.pdf" target="_blank" rel="external">CUDA Starting Guide</a>)。下载对应于你系统的<a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="external">CUDA deb包</a>, 然后用下列命令添加软件源</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i cuda-repo-&lt;distro&gt;_&lt;version&gt;_&lt;architecture&gt;.deb</span><br><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>
<p>然后用下列命令安装CUDA</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cuda</span><br></pre></td></tr></table></figure>
<p>安装完成后 reboot.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure>
<h3 id="安装cudnn">安装cuDNN</h3>
<p><strong>(03-25: 今天下最新的caffe回来发现编译不过啊一直CUDNN报错浪费了我几个小时没搞定! 后来才发现caffe15小时前的更新开始使用cudnn v2, 但是官网上并没有明显提示!!! 坑爹啊!)</strong><br>
cuDNN能加速caffe中conv及pooling的计算。首先下载<a href="https://developer.nvidia.com/cudnn" target="_blank" rel="external">cuDNN</a>,需要注册。或通过在<strong>百度云</strong> 链接：<a href="http://pan.baidu.com/s/1dEXPg3J" target="_blank" rel="external">http://pan.baidu.com/s/1dEXPg3J</a> 密码：v19o 得到。</p>
<p>![](<a href="http://static.mindcont.com/blog/images/caffe/cuDNN" target="_blank" rel="external">http://static.mindcont.com/blog/images/caffe/cuDNN</a> Download.png)</p>
<p>下载完成后，然后执行下列命令解压并安装</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 需注意，切换到你自己存放 cudnn-7.5-linux-x64-v5.1-rc.tgz 文件的文件夹下进行解压</span></span><br><span class="line">tar -zxvf cudnn-7.5-linux-x64-v5.1-rc.tgz</span><br><span class="line"><span class="built_in">cd</span> cuda</span><br><span class="line">sudo cp lib64/* /usr/<span class="built_in">local</span>/cuda/lib64/</span><br><span class="line">sudo cp include/cudnn.h /usr/<span class="built_in">local</span>/cuda/include/</span><br></pre></td></tr></table></figure>
<p><img src="http://static.mindcont.com/blog/images/caffe/cudnn_copy.png" alt=""><br>
更新软链接</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/cuda/lib64/</span><br><span class="line">sudo rm -rf libcudnn.so libcudnn.so.5</span><br><span class="line">sudo ln <span class="_">-s</span> libcudnn.so.5.1.3 libcudnn.so</span><br></pre></td></tr></table></figure>
<p><img src="http://static.mindcont.com/blog/images/caffe/cudnn_finish.png" alt=""></p>
<h3 id="设置环境变量">设置环境变量</h3>
<p>安装完成后需要在<code>/etc/profile</code>中添加环境变量,</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/profile</span><br></pre></td></tr></table></figure>
<p>在文件最后添加:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PATH=/usr/<span class="built_in">local</span>/cuda/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> PATH</span><br></pre></td></tr></table></figure>
<p><img src="http://static.mindcont.com/blog/images/caffe/caffe_profile.png" alt=""><br>
保存后, 执行下列命令, 使环境变量立即生效</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
<p>同时需要添加lib库路径： 在 <code>/etc/ld.so.conf.d/</code>加入文件 <code>cuda.conf</code>, 内容如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/cuda/lib64</span><br></pre></td></tr></table></figure>
<p><img src="http://static.mindcont.com/blog/images/caffe/cuda_conf.png" alt=""><br>
保存后，执行下列命令使之立刻生效</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure>
<h2 id="测试cuda">测试CUDA</h2>
<p>进入<code>/usr/local/cuda/samples</code>, 执行下列命令来build samples</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make all -j4</span><br></pre></td></tr></table></figure>
<p>编译过程<br>
<img src="http://static.mindcont.com/blog/images/caffe/cuda_samples.png" alt=""><br>
整个过程大概10分钟左右, 全部编译完成后， 进入 <code>samples/bin/x86_64/linux/release</code>, 运行deviceQuery</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./deviceQuery</span><br></pre></td></tr></table></figure>
<p>如果出现显卡信息， 则驱动及显卡安装成功：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">pi@DeepMind:/usr/local/cuda/samples/bin/x86_64/linux/release$ ./deviceQuery</span><br><span class="line">./deviceQuery Starting...</span><br><span class="line"></span><br><span class="line"> CUDA Device Query (Runtime API) version (CUDART static linking)</span><br><span class="line"></span><br><span class="line">Detected 1 CUDA Capable device(s)</span><br><span class="line"></span><br><span class="line">Device 0: &quot;Quadro K2200&quot;</span><br><span class="line">  CUDA Driver Version / Runtime Version          7.5 / 7.5</span><br><span class="line">  CUDA Capability Major/Minor version number:    5.0</span><br><span class="line">  Total amount of global memory:                 4095 MBytes (4294246400 bytes)</span><br><span class="line">  ( 5) Multiprocessors, (128) CUDA Cores/MP:     640 CUDA Cores</span><br><span class="line">  GPU Max Clock rate:                            1124 MHz (1.12 GHz)</span><br><span class="line">  Memory Clock rate:                             2505 Mhz</span><br><span class="line">  Memory Bus Width:                              128-bit</span><br><span class="line">  L2 Cache Size:                                 2097152 bytes</span><br><span class="line">  Maximum Texture Dimension Size (x,y,z)         1D=(65536), 2D=(65536, 65536), 3D=(4096, 4096, 4096)</span><br><span class="line">  Maximum Layered 1D Texture Size, (num) layers  1D=(16384), 2048 layers</span><br><span class="line">  Maximum Layered 2D Texture Size, (num) layers  2D=(16384, 16384), 2048 layers</span><br><span class="line">  Total amount of constant memory:               65536 bytes</span><br><span class="line">  Total amount of shared memory per block:       49152 bytes</span><br><span class="line">  Total number of registers available per block: 65536</span><br><span class="line">  Warp size:                                     32</span><br><span class="line">  Maximum number of threads per multiprocessor:  2048</span><br><span class="line">  Maximum number of threads per block:           1024</span><br><span class="line">  Max dimension size of a thread block (x,y,z): (1024, 1024, 64)</span><br><span class="line">  Max dimension size of a grid size    (x,y,z): (2147483647, 65535, 65535)</span><br><span class="line">  Maximum memory pitch:                          2147483647 bytes</span><br><span class="line">  Texture alignment:                             512 bytes</span><br><span class="line">  Concurrent copy and kernel execution:          Yes with 1 copy engine(s)</span><br><span class="line">  Run time limit on kernels:                     Yes</span><br><span class="line">  Integrated GPU sharing Host Memory:            No</span><br><span class="line">  Support host page-locked memory mapping:       Yes</span><br><span class="line">  Alignment requirement for Surfaces:            Yes</span><br><span class="line">  Device has ECC support:                        Disabled</span><br><span class="line">  Device supports Unified Addressing (UVA):      Yes</span><br><span class="line">  Device PCI Domain ID / Bus ID / location ID:   0 / 1 / 0</span><br><span class="line">  Compute Mode:</span><br><span class="line">     &lt; Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) &gt;</span><br><span class="line"></span><br><span class="line">deviceQuery, CUDA Driver = CUDART, CUDA Driver Version = 7.5, CUDA Runtime Version = 7.5, NumDevs = 1, Device0 = Quadro K2200</span><br><span class="line">Result = PASS</span><br></pre></td></tr></table></figure>
<p><img src="http://static.mindcont.com/blog/images/caffe/deviceQuery.png" alt=""></p>
<h2 id="安装intel-mkl-或atlas">安装Intel MKL 或Atlas</h2>
<p>如果没有Intel MKL， 可以用下列命令安装免费的atlas</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libatlas-base-dev</span><br></pre></td></tr></table></figure>
<p>如果有mkl安装包<a href="https://software.intel.com/en-us/intel-mkl" target="_blank" rel="external">Intel® MKL</a>需注册后会发下载链接和激活码到注册邮箱。<br>
先注册，后再登录到此界面，选择’Get This Library for Free!’-&gt;‘Everyone’。<br>
<img src="http://static.mindcont.com/blog/images/caffe/mkl_Download_1.png" alt=""><br>
选择社区版本Licensing<br>
<img src="http://static.mindcont.com/blog/images/caffe/mkl_Download_2.png" alt=""><br>
填写信息后，会下载链接和激活码到你注册邮箱。<br>
<img src="http://static.mindcont.com/blog/images/caffe/mkl_Download_3.png" alt=""><br>
首先解压安装包，下面有一个install_GUI.sh文件， 执行该文件，会出现图形安装界面，根据说明一步一步执行即可。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf l_mkl_11.3.3.210.tgz</span><br><span class="line"><span class="built_in">cd</span> l_mkl_11.3.3.210</span><br><span class="line">sudo sh install.sh</span><br></pre></td></tr></table></figure>
<p><img src="http://static.mindcont.com/blog/images/caffe/mkl_install.png" alt=""><br>
<img src="http://static.mindcont.com/blog/images/caffe/mkl_ativate.png" alt=""><br>
<img src="http://static.mindcont.com/blog/images/caffe/mkl_complete.png" alt=""><br>
<strong>注意</strong>： 安装完成后需要添加library路径, 创建<code>/etc/ld.so.conf.d/intel_mkl.conf</code>文件， 在文件中添加内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/opt/intel/lib/intel64</span><br><span class="line">/opt/intel/mkl/lib/intel64</span><br></pre></td></tr></table></figure>
<p><img src="http://static.mindcont.com/blog/images/caffe/intel_mkl_conf.png" alt=""><br>
注意把路径替换成自己的安装路径。 编辑完后执行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure>
<h2 id="安装opencv-optional-如果运行caffe时opencv报错-可以重新按照此步骤安装">安装OpenCV (Optional， 如果运行caffe时opencv报错， 可以重新按照此步骤安装)</h2>
<p>参见我的另一篇博客<a href="http://blog.mindcont.com/2016/07/16/installing-opencv-2-4-9-in-ubuntu-14-04-lts/">Ubuntu 14.04安装 OpenCV 2.4.9</a></p>
<h2 id="安装caffe所需要的python环境">安装Caffe所需要的Python环境</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python-numpy python-scipy python-matplotlib python-sklearn python-skimage python-h5py python-protobuf python-leveldb python-networkx python-nose python-pandas python-gflags Cython ipython python-pydot</span><br><span class="line">sudo apt-get install protobuf-c-compiler protobuf-compiler</span><br></pre></td></tr></table></figure>
<h2 id="安装matlab">安装MATLAB</h2>
<p>Caffe提供了MATLAB接口，有需要用MATLAB的同学可以额外安装MATLAB。安装教程同Windows 下类似,首先下载 MATLAB for Linux、解压。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh ./install.sh</span><br></pre></td></tr></table></figure>
<p>弹出图形界面，之后同在Windows下一样进行破解激活。windows下安装和激活 Matlab参加我的另一篇博客<a href="http://blog.mindcont.com/2016/05/18/Microsoft-Kinect-V2-with-Matlab/">Matlab连接Kinect V2</a>  。安装完成后可<a href="http://www.linuxidc.com/Linux/2011-01/31632.htm" target="_blank" rel="external">添加图标</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /usr/share/applications/Matlab.desktop</span><br></pre></td></tr></table></figure>
<p>输入以下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Type=Application</span><br><span class="line">Name=Matlab</span><br><span class="line">GenericName=Matlab R2015b</span><br><span class="line">Comment=Matlab:The Language of Technical Computing</span><br><span class="line">Exec=sh /usr/local/MATLAB/R2015b/bin/matlab -desktop</span><br><span class="line">Icon=/usr/local/MATLAB/Matlab.png</span><br><span class="line">Terminal=false</span><br><span class="line">Categories=Development;Matlab;</span><br></pre></td></tr></table></figure>
<p>这里我的Matlab安装位置为默认，如下所示<br>
<img src="http://static.mindcont.com/blog/images/caffe/matlab_location.png" alt=""></p>
<h2 id="编译caffe">编译Caffe</h2>
<h3 id="编译主程序">编译主程序</h3>
<p>终于完成了所有环境的配置，可以愉快的编译Caffe了！<strong>需要注意的是，这里我采用的是caffe-rc3.zip(on 30 Jan 2016)。</strong> 进入caffe根目录， 首先复制一份<code>Makefile.config</code>,</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp Makefile.config.example Makefile.config</span><br></pre></td></tr></table></figure>
<p>然后修改里面的内容，主要需要修改的参数包括</p>
<ul>
<li>CPU_ONLY 是否只使用CPU模式，没有GPU没安装CUDA的同学可以打开这个选项</li>
<li>BLAS (使用intel mkl还是atlas)</li>
<li>MATLAB_DIR 如果需要使用MATLAB wrapper的同学需要指定matlab的安装路径, 如我的路径为 <code>/usr/local/MATLAB/R2015b</code> (注意该目录下需要包含bin文件夹，bin文件夹里应该包含mex二进制程序)</li>
<li>DEBUG 是否使用debug模式，打开此选项则可以在eclipse或者NSight中debug程序</li>
<li>CUDA_ARCH 可根据你自己显卡对应的计算力<a href="https://developer.nvidia.com/cuda-gpus" target="_blank" rel="external"></a>改相应的 -gencode arch=compute_xx,code=compute_xx 。例如我的显卡是 NVIDIA K2200 对应的计算力是 5.0，所以我相应的设置为 -gencode arch=compute_50,code=compute_50</li>
</ul>
<p>这里是我的配置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Refer to http://caffe.berkeleyvision.org/installation.html</span></span><br><span class="line"><span class="comment"># Contributions simplifying and improving our build system are welcome!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cuDNN acceleration switch (uncomment to build with cuDNN).</span></span><br><span class="line"> USE_CUDNN := 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># CPU-only switch (uncomment to build without GPU support).</span></span><br><span class="line"><span class="comment"># CPU_ONLY := 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># uncomment to disable IO dependencies and corresponding data layers</span></span><br><span class="line"> USE_OPENCV := 1</span><br><span class="line"> USE_LEVELDB := 1</span><br><span class="line"> USE_LMDB := 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># uncomment to allow MDB_NOLOCK when reading LMDB files (only if necessary)</span></span><br><span class="line"><span class="comment">#	You should not set this flag if you will be reading LMDBs with any</span></span><br><span class="line"><span class="comment">#	possibility of simultaneous read and write</span></span><br><span class="line"><span class="comment"># ALLOW_LMDB_NOLOCK := 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment if you're using OpenCV 3</span></span><br><span class="line"><span class="comment"># OPENCV_VERSION := 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># To customize your choice of compiler, uncomment and set the following.</span></span><br><span class="line"><span class="comment"># N.B. the default for Linux is g++ and the default for OSX is clang++</span></span><br><span class="line"><span class="comment"># CUSTOM_CXX := g++</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CUDA directory contains bin/ and lib/ directories that we need.</span></span><br><span class="line"> CUDA_DIR := /usr/<span class="built_in">local</span>/cuda</span><br><span class="line"><span class="comment"># On Ubuntu 14.04, if cuda tools are installed via</span></span><br><span class="line"><span class="comment"># "sudo apt-get install nvidia-cuda-toolkit" then use this instead:</span></span><br><span class="line"><span class="comment"># CUDA_DIR := /usr</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CUDA architecture setting: going with all of them.</span></span><br><span class="line"><span class="comment"># For CUDA &lt; 6.0, comment the *_50 lines for compatibility.</span></span><br><span class="line"> CUDA_ARCH := -gencode arch=compute_50,code=sm_50 \</span><br><span class="line">		-gencode arch=compute_50,code=compute_50</span><br><span class="line"></span><br><span class="line"><span class="comment"># BLAS choice:</span></span><br><span class="line"><span class="comment"># atlas for ATLAS (default)</span></span><br><span class="line"><span class="comment"># mkl for MKL</span></span><br><span class="line"><span class="comment"># open for OpenBlas</span></span><br><span class="line"> BLAS := mkl</span><br><span class="line"><span class="comment"># Custom (MKL/ATLAS/OpenBLAS) include and lib directories.</span></span><br><span class="line"><span class="comment"># Leave commented to accept the defaults for your choice of BLAS</span></span><br><span class="line"><span class="comment"># (which should work)!</span></span><br><span class="line"> BLAS_INCLUDE := /opt/intel/mkl/include</span><br><span class="line"> BLAS_LIB := /opt/intel/mkl/lib/intel64 \</span><br><span class="line">	     /opt/intel/lib/intel64</span><br><span class="line"></span><br><span class="line"><span class="comment"># Homebrew puts openblas in a directory that is not on the standard search path</span></span><br><span class="line"><span class="comment"># BLAS_INCLUDE := $(shell brew --prefix openblas)/include</span></span><br><span class="line"><span class="comment"># BLAS_LIB := $(shell brew --prefix openblas)/lib</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This is required only if you will compile the matlab interface.</span></span><br><span class="line"><span class="comment"># MATLAB directory should contain the mex binary in /bin.</span></span><br><span class="line"> MATLAB_DIR := /usr/<span class="built_in">local</span>/MATLAB/R2015b</span><br><span class="line"><span class="comment"># MATLAB_DIR := /Applications/MATLAB_R2012b.app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># <span class="doctag">NOTE:</span> this is required only if you will compile the python interface.</span></span><br><span class="line"><span class="comment"># We need to be able to find Python.h and numpy/arrayobject.h.</span></span><br><span class="line">PYTHON_INCLUDE := /usr/include/python2.7 \</span><br><span class="line">		/usr/lib/python2.7/dist-packages/numpy/core/include</span><br><span class="line"><span class="comment"># Anaconda Python distribution is quite popular. Include path:</span></span><br><span class="line"><span class="comment"># Verify anaconda location, sometimes it's in root.</span></span><br><span class="line"><span class="comment"># ANACONDA_HOME := $(HOME)/anaconda</span></span><br><span class="line"><span class="comment"># PYTHON_INCLUDE := $(ANACONDA_HOME)/include \</span></span><br><span class="line">		<span class="comment"># $(ANACONDA_HOME)/include/python2.7 \</span></span><br><span class="line">		<span class="comment"># $(ANACONDA_HOME)/lib/python2.7/site-packages/numpy/core/include \</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment to use Python 3 (default is Python 2)</span></span><br><span class="line"><span class="comment"># PYTHON_LIBRARIES := boost_python3 python3.5m</span></span><br><span class="line"><span class="comment"># PYTHON_INCLUDE := /usr/include/python3.5m \</span></span><br><span class="line"><span class="comment">#                 /usr/lib/python3.5/dist-packages/numpy/core/include</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># We need to be able to find libpythonX.X.so or .dylib.</span></span><br><span class="line">PYTHON_LIB := /usr/lib</span><br><span class="line"><span class="comment"># PYTHON_LIB := $(ANACONDA_HOME)/lib</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Homebrew installs numpy in a non standard path (keg only)</span></span><br><span class="line"><span class="comment"># PYTHON_INCLUDE += $(dir $(shell python -c 'import numpy.core; print(numpy.core.__file__)'))/include</span></span><br><span class="line"><span class="comment"># PYTHON_LIB += $(shell brew --prefix numpy)/lib</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment to support layers written in Python (will link against Python libs)</span></span><br><span class="line"><span class="comment"># WITH_PYTHON_LAYER := 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Whatever else you find you need goes here.</span></span><br><span class="line">INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/<span class="built_in">local</span>/include</span><br><span class="line">LIBRARY_DIRS := $(PYTHON_LIB) /usr/<span class="built_in">local</span>/lib /usr/lib</span><br><span class="line"></span><br><span class="line"><span class="comment"># If Homebrew is installed at a non standard location (for example your home directory) and you use it for general dependencies</span></span><br><span class="line"><span class="comment"># INCLUDE_DIRS += $(shell brew --prefix)/include</span></span><br><span class="line"><span class="comment"># LIBRARY_DIRS += $(shell brew --prefix)/lib</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment to use `pkg-config` to specify OpenCV library paths.</span></span><br><span class="line"><span class="comment"># (Usually not necessary -- OpenCV libraries are normally installed in one of the above $LIBRARY_DIRS.)</span></span><br><span class="line"><span class="comment"># USE_PKG_CONFIG := 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># N.B. both build and distribute dirs are cleared on `make clean`</span></span><br><span class="line">BUILD_DIR := build</span><br><span class="line">DISTRIBUTE_DIR := distribute</span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment for debugging. Does not work on OSX due to https://github.com/BVLC/caffe/issues/171</span></span><br><span class="line"><span class="comment"># DEBUG := 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The ID of the GPU that 'make runtest' will use to run unit tests.</span></span><br><span class="line"> TEST_GPUID := 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># enable pretty build (comment to see full commands)</span></span><br><span class="line">Q ?= @</span><br></pre></td></tr></table></figure>
<p>完成设置后， 开始编译</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make all -j4</span><br><span class="line">make <span class="built_in">test</span></span><br><span class="line">make runtest</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong> <code>-j4</code> 是指使用几个线程来同时编译， 可以加快速度， j后面的数字可以根据CPU core的个数来决定， 我的CPU使4核， 所以-j4.<br>
<img src="http://static.mindcont.com/blog/images/caffe/makeruntest_begin.png" alt=""><br>
<img src="http://static.mindcont.com/blog/images/caffe/makeruntest_finish.png" alt=""></p>
<h3 id="编译matlab-wrapper">编译Matlab wrapper</h3>
<p>执行如下命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make matcaffe</span><br></pre></td></tr></table></figure>
<p>然后就可以跑官方的matlab demo啦。</p>
<h3 id="编译python-wrapper">编译Python wrapper</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make pycaffe</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong> 这里生成caffe 的 python 还不能够直接使用，建议输入下面的指令，将其加入到当前用户的用户变量中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">gedit .bashrc</span><br></pre></td></tr></table></figure>
<p>在打开的文件中，输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PYTHONPATH=/home/pi/caffe/python:$PYTHONPATH</span><br></pre></td></tr></table></figure>
<p>保存后关闭，然后在命令行下输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source .bashrc</span><br></pre></td></tr></table></figure>
<p>打开一个新的终端或同时按住（Ctrl + Alt + T）,输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line">import caffe</span><br></pre></td></tr></table></figure>
<p>如果看到如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@DeepMind:~$ python</span><br><span class="line">Python 2.7.6 (default, Jun 22 2015, 17:58:13)</span><br><span class="line">[GCC 4.8.2] on linux2</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import caffe</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<p>然后基本就全部安装完拉。接下来大家尽情地跑demo吧～</p>
<h2 id="参考链接">参考链接</h2>
<ul>
<li><a href="http://caffe.berkeleyvision.org/install_apt.html" target="_blank" rel="external">Ubuntu Installation</a></li>
<li><a href="https://github.com/BVLC/caffe/wiki/Ubuntu-16.04-or-15.10-Installation-Guide" target="_blank" rel="external">Ubuntu 16.04 or 15.10 Installation Guide</a></li>
<li><a href="https://gist.github.com/bearpaw/c38ef18ec45ba6548ec0" target="_blank" rel="external">Caffe + Ubuntu 12.04 64bit + CUDA 6.5 配置说明</a></li>
<li><a href="http://www.cnblogs.com/platero/p/3993877.html" target="_blank" rel="external">普兒的技术传送门</a></li>
<li><a href="http://blog.csdn.net/u013476464/article/details/38071075" target="_blank" rel="external">浙商大嵌入式实验室-凉水煮茶</a></li>
<li><a href="http://zzfei.com/archives/process-solving-a-compilation-problem.html" target="_blank" rel="external">记一个编译问题的解决过程</a></li>
<li><a href="http://blog.csdn.net/brightming/article/details/51106629" target="_blank" rel="external">caffe的配置过程</a></li>
<li><a href="https://github.com/rbgirshick/py-faster-rcnn/issues/2" target="_blank" rel="external">error == cudaSuccess (8 vs. 0) </a></li>
</ul>
<p><strong>转载务必注明</strong> 来自<a href="http://blog.mindcont.com/2016/07/20/ubuntu1404-caffe-cuda7-5-mkl/">微记元-Ubuntu 14.04 64bit + Caffe + CUDA 7.5 + Intel MKL 配置说明</a></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://blog.mindcont.com/2016/07/20/ubuntu1404-caffe-r3-cuda7-5-mkl/" data-id="cj8jtnm7y002erk9om52mzpd3" class="article-share-link">分享到</a><div class="tags"><a href="/tags/caffe/">caffe</a></div><div class="post-nav"><a href="/2016/07/22/research-progress-in-object-detection/" class="pre">基于深度学习的目标检测研究进展</a><a href="/2016/07/16/installing-opencv-2-4-9-in-ubuntu-14-04-lts/" class="next">Ubuntu 14.04安装 OpenCV 2.4.9</a></div><div id="disqus_thread"><script>var disqus_shortname = 'micro-era';
var disqus_identifier = '2016/07/20/ubuntu1404-caffe-r3-cuda7-5-mkl/';
var disqus_title = 'Ubuntu 14.04 64bit + Caffe rc3 + CUDA 7.5 + Intel MKL 配置说明';
var disqus_url = 'http://blog.mindcont.com/2016/07/20/ubuntu1404-caffe-r3-cuda7-5-mkl/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//micro-era.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://blog.mindcont.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Kinect/">Kinect</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/深度学习/">深度学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔日记/">随笔日记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/caffe/" style="font-size: 15px;">caffe</a> <a href="/tags/树莓派/" style="font-size: 15px;">树莓派</a> <a href="/tags/coding/" style="font-size: 15px;">coding</a> <a href="/tags/TED/" style="font-size: 15px;">TED</a> <a href="/tags/OpenCV/" style="font-size: 15px;">OpenCV</a> <a href="/tags/Kinect/" style="font-size: 15px;">Kinect</a> <a href="/tags/matlab/" style="font-size: 15px;">matlab</a> <a href="/tags/ros/" style="font-size: 15px;">ros</a> <a href="/tags/转载/" style="font-size: 15px;">转载</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/09/09/interview-diary/">求职笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/25/how-to-do-mnist-demo/">Caffe 入门-MNIST 实验</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/25/debug-android-win/">调试安卓的小技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/22/some-advice-for-research-beginners/">给初做科研的一些建议</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/20/visual-cortex/">从视网膜到视皮层——视觉系统知多少</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/16/my-review-2016/">2016 , 我的年终总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/15/ideas-worth-spreading/">值得传播的思想</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/15/caffe-guide-book/">Caffe 入门指南</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/05/machine-learning-for-software-engineers/">自上而下的学习路线-软件工程师的机器学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/26/nginx-proxy-lan/">局域网内nginx反向代理上网</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//micro-era.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://memect.com/" title="好东西传送门" target="_blank">好东西传送门</a><ul></ul><a href="https://prism-break.org/zh-CN/all/" title="粉碎棱镜" target="_blank">粉碎棱镜</a><ul></ul><a href="https://www.daoon.com/" title="道卬" target="_blank">道卬</a><ul></ul><a href="https://www.ted.com/" title="TED | 值得传播的思想" target="_blank">TED | 值得传播的思想</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">项脊轩.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-74386502-3','auto');ga('send','pageview');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>